# struct重定义的问题

遇到一个问题，struct重定义。
> Error	C2011	'ClassSSEStat': 'struct' type redefinition Bspec.h	348	

搜索了一下工程，确实有两个一样的定义，在不同的头文件中，上面的bspec.h和bspec2.h。
所以这里缕清了一下规则：
1. C++头文件都是在预编译时直接在源文件中展开的，如果源文件没包含，那么头文件的内容就不会编译到。
2. struct结构体定义在头文件中，如果头文件没被包含，struct也不会被编译到。
3. 如果遇到了struct重定义的问题，那么一定是两个struct定义同时被某个源文件包含到了。

上面三个分析一出来，剩下的就是查找究竟是哪个源文件同时包含了bspec.h和bspec2.h。当然很有可能是间接包含的。

我这里有个背景，有两个类似的工程编译没有错误，只有这个工程有，那么问题肯定就出在这个工程不同的地方。
果然就找到了，有个源文件同时间接的引用了这两个头文件，导致有struct重定义的问题。

感叹一句，c++的头文件包含真混乱！